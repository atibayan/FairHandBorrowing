<!DOCTYPE html>
<html
        xmlns:th="http://www.thymeleaf.org"
        xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
        layout:decorate="~{layout/layout.html}"
><head>
    <meta charset="UTF-8">
    <title>Home</title>
</head>
<body class="d-flex flex-column h-100">
<main class="flex-shrink-0">

  <section layout:fragment="body" class="mx-auto" style="width: 80vw">
      <button type="button" class="btn btn-success">
          <a th:href="@{/edit}">
              About my Account
          </a>
      </button>

      <div class="text-center mb-5">
          <h3 class="fw-bolder">Loans</h3>
      </div>
      <div>
        <a class="btn btn-primary" th:href="@{/loan/{userName}/new(userName=${user.getUserName()})}">Create Loan</a>
      </div>
      <div th:if="${loans.isEmpty()}">NO AVAILABLE LOANS</div>

      <table class="table table-striped table-hover" th:if="${!loans.isEmpty()}">
          <thead class="thead-dark">
          <tr>
              <th scope="col">#</th>
              <th scope="col">Created On</th>
              <th scope="col">Created By</th>
              <th scope="col">Total Amount</th>
              <th scope="col">Interest Rate</th>
              <th scope="col">Description</th>
              <th scope="col">Months To Pay</th>
              <th scope="col">Actions</th>
          </tr>
          </thead>
          <tbody>
          <tr th:each="loan : ${loans}">
              <td th:text="${loan.getId()}"></td>
              <td th:text="${loan.getCreatedOn()}"></td>
              <td th:text="${loan.getUser().getUsername()}"></td>
              <td th:text="${loan.getAmountBorrowed()}"></td>
              <td th:text="${loan.getInterestRate()}"></td>
              <td th:text="${loan.getDescription()}">ToDo Description of Loan</td>
              <td th:text="${loan.getMonthsToPay()}">Months To Pay</td>
              <td>
<!--                  <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal">-->
<!--                      Launch demo modal-->
<!--                  </button>-->

<!--                  &lt;!&ndash; Modal &ndash;&gt;-->
<!--                  <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">-->
<!--                      <div class="modal-dialog" role="document">-->
<!--                          <div class="modal-content">-->
<!--                              <div class="modal-header">-->
<!--                                  <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>-->
<!--                                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">-->
<!--                                      <span aria-hidden="true">&times;</span>-->
<!--                                  </button>-->
<!--                              </div>-->
<!--                              <div class="modal-body">-->
<!--                                  <p th:text="${loan.getId()}"></p>-->
<!--                              </div>-->
<!--                              <div class="modal-footer">-->
<!--                                  <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>-->
<!--                                  <button type="button" class="btn btn-primary">Save changes</button>-->
<!--                              </div>-->
<!--                          </div>-->
<!--                      </div>-->
<!--                  </div>-->
                  <a class="btn btn-warning"
                     th:href="@{/loan/{userName}/edit(loan_id=${loan.getId()}, userName=${user.getUserName()})}">
                      <i class="fa fa-pencil"></i>
                  </a>
                  <a type="button" class="btn btn-danger" th:href="@{/loan/{userName}/cancel(id=${loan.getId()}, userName=${user.getUserName()})}">
                      <i class="fa fa-times"></i>
                  </a>
                  <form role="form" method="post"
                        style="display: inline"
                        th:action="@{/loan/{userName}/archive(userName=${user.getUserName()}, loanId=${loan.getId()})}">
                      <button type="submit" class="btn btn-danger"><i class="fa fa-times"></i></button>
                  </form>
                  <a type="button" class="btn btn-success" th:href="@{/requestFunds/{userName}/{loanId}/new(loanId=${loan.getId()}, userName=${user.getUserName()})}">
                      <i class="fa fa-usd"></i>
                  </a>
              </td>
          </tr>
          </tbody>
      </table>

      <br>
      <div class="text-center mb-5">
          <h3 class="fw-bolder">Collaterals</h3>
      </div>
      <div>
        <a class="btn btn-primary" th:href="@{/collateral/{userName}/new(userName=${user.getUserName()})}">Create Collateral</a>
      </div>
      <div th:if="${collaterals.isEmpty()}">NO AVAILABLE COLLATERALS</div>
      <table class="table table-striped table-hover" th:if="${!collaterals.isEmpty()}">
          <thead class="thead-dark">
          <tr>
              <th scope="col">#</th>
              <th scope="col">Item Name</th>
              <th scope="col">Type</th>
              <th scope="col">Brand</th>
              <th scope="col">Description</th>
              <th scope="col">Item Condition</th>
              <th scope="col">Market Value</th>
              <th scope="col">Associated Loan ID</th>
          </tr>
          </thead>
          <tbody>
          <tr th:each="collateral : ${collaterals}">
              <td th:text="${collateral.getId()}"></td>
              <td th:text="${collateral.getItemName()}"></td>
              <td>ToDo Get Type</td>
              <td th:text="${collateral.getBrand()}"></td>
              <td th:text="${collateral.getDescription()}"></td>
              <td th:text="${collateral.getItemCondition()}"></td>
              <td th:text="${collateral.getMarketValue()}"></td>
              <td>ToDo Get Associated Loan ID</td>
          </tr>
          </tbody>
      </table>
  </section>
</main>
</body>

</html>